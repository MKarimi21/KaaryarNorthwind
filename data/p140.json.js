window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p140","name":"SalesByCategory","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Northwind","id":"d7"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"SalesByCategory"},{"field":"Type","value":"Procedure"}],"script":"CREATE PROCEDURE SalesByCategory\r\n    @CategoryName nvarchar(15), @OrdYear nvarchar(4) = '1998'\r\nAS\r\nIF @OrdYear != '1996' AND @OrdYear != '1997' AND @OrdYear != '1998' \r\nBEGIN\r\n\tSELECT @OrdYear = '1998'\r\nEND\r\n\r\nSELECT ProductName,\r\n\tTotalPurchase=ROUND(SUM(CONVERT(decimal(14,2), OD.Quantity * (1-OD.Discount) * OD.UnitPrice)), 0)\r\nFROM [Order Details] OD, Orders O, Products P, Categories C\r\nWHERE OD.OrderID = O.OrderID \r\n\tAND OD.ProductID = P.ProductID \r\n\tAND P.CategoryID = C.CategoryID\r\n\tAND C.CategoryName = @CategoryName\r\n\tAND SUBSTRING(CONVERT(nvarchar(22), O.OrderDate, 111), 1, 4) = @OrdYear\r\nGROUP BY ProductName\r\nORDER BY ProductName","parameters":[{"name":"CategoryName","description":null,"mode":"IN","data_type":"nvarchar(15)","custom_fields":{}},{"name":"OrdYear","description":null,"mode":"IN","data_type":"nvarchar(4)","custom_fields":{}}],"dependencies":{"uses":[{"object_name":"SalesByCategory","object_name_show_schema":"dbo.SalesByCategory","object_type":"PROCEDURE","object_id":"p140","type":"NORMAL","object_user_defined":false,"user_defined":false,"children":[{"object_name":"Categories","object_name_show_schema":"dbo.Categories","object_type":"TABLE","object_id":"t3719","type":"NORMAL","object_user_defined":false,"user_defined":false,"children":[]},{"object_name":"Order Details","object_name_show_schema":"dbo.Order Details","object_type":"TABLE","object_id":"t3726","type":"NORMAL","object_user_defined":false,"user_defined":false,"children":[]},{"object_name":"Orders","object_name_show_schema":"dbo.Orders","object_type":"TABLE","object_id":"t3727","type":"NORMAL","object_user_defined":false,"user_defined":false,"children":[]},{"object_name":"Products","object_name_show_schema":"dbo.Products","object_type":"TABLE","object_id":"t3728","type":"NORMAL","object_user_defined":false,"user_defined":false,"children":[]}]}],"used_by":[]},"imported_at":"2024-02-29 21:36"};